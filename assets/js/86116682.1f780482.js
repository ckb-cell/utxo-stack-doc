"use strict";(self.webpackChunkutxo_stack_website=self.webpackChunkutxo_stack_website||[]).push([[453],{6963:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});var l=n(4848),s=n(8453);const r={sidebar_position:4},i="UTXO stack DA layer",t={id:"da-layer",title:"UTXO stack DA layer",description:"UTXO stack DA layer \u4f7f\u7528\u8f7b\u8282\u70b9 data sampling \u89e3\u51b3 data availability \u95ee\u9898\u3002",source:"@site/docs/da-layer.md",sourceDirName:".",slug:"/da-layer",permalink:"/docs/da-layer",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/da-layer.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"App Chain",permalink:"/docs/app-chain"},next:{title:"Assets leap",permalink:"/docs/cross-chain"}},o={},c=[{value:"DA chain",id:"da-chain",level:2},{value:"Header",id:"header",level:3},{value:"Submit Data",id:"submit-data",level:3},{value:"DA proof",id:"da-proof",level:3},{value:"Pruning",id:"pruning",level:2},{value:"Data sampling",id:"data-sampling",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.h1,{id:"utxo-stack-da-layer",children:"UTXO stack DA layer"}),"\n",(0,l.jsx)(a.p,{children:"UTXO stack DA layer \u4f7f\u7528\u8f7b\u8282\u70b9 data sampling \u89e3\u51b3 data availability \u95ee\u9898\u3002"}),"\n",(0,l.jsx)(a.p,{children:"UTXO stack \u53ca RGB++ \u63d0\u4f9b\u4e86 DA \u653b\u51fb\u65f6\u7684\u9000\u51fa\u65b9\u6848\uff0c\u8be6\u89c1 DA exit \u6587\u6863\u3002\u56e0\u6b64\u8d44\u4ea7\u5b89\u5168\u6027\u5e76\u4e0d\u4f9d\u8d56\u4e8e DA layer \u5b89\u5168\u6027\uff0c\u4f46\u4f7f\u7528 DA layer \u4ecd\u7136\u6709\u5f88\u591a\u597d\u5904:"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsx)(a.li,{children:"\u63d0\u5347\u505a\u6076\u6210\u672c\uff0c\u653b\u51fb\u8005\u5fc5\u987b\u540c\u65f6\u653b\u51fb DA layer \u4ee5\u53ca App chain \u624d\u53ef\u4ee5\u64cd\u4f5c\u8d44\u4ea7"}),"\n",(0,l.jsx)(a.li,{children:"\u964d\u4f4e\u6311\u6218\u6210\u672c\uff0cDA layer \u652f\u6301\u901a\u8fc7\u8f7b\u8282\u70b9\u83b7\u53d6\u6570\u636e\u4ee5\u53ca Data sampling \u68c0\u67e5\u6570\u636e\u5408\u6cd5\u6027\uff0c\u4f7f\u8fd0\u884c\u6311\u6218\u8282\u70b9\u7684\u6210\u672c\u66f4\u4f4e"}),"\n",(0,l.jsx)(a.li,{children:"\u96c6\u4e2d Staking, DA layer \u7684 Staking \u76f8\u6bd4\u5206\u6563\u5f00\u7684 App chain \u4f1a\u66f4\u52a0\u96c6\u4e2d\uff0c\u589e\u52a0 DA layer \u5171\u8bc6\u7684\u5b89\u5168\u6027"}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"da-chain",children:"DA chain"}),"\n",(0,l.jsx)(a.h3,{id:"header",children:"Header"}),"\n",(0,l.jsx)(a.p,{children:"DA chain \u4f7f\u7528\u548c App chain \u7c7b\u4f3c\u7684\u67b6\u6784\uff0c\u5728\u539f\u6709\u7ed3\u6784\u4e0a\u6269\u5c55\u4e86\u5171\u8bc6\u673a\u5236\u4ee5\u53ca P2P \u7f51\u7edc\u7b49\u534f\u8bae\u6765\u652f\u6301 DA layer \u7684\u529f\u80fd\u3002"}),"\n",(0,l.jsxs)(a.p,{children:["DA chain \u7684 Block \u7ed3\u6784\u4e0e App chain \u4fdd\u6301\u4e00\u81f4\u3002\u4f46\u662f ",(0,l.jsx)(a.code,{children:"tx_root"})," \u5b57\u6bb5\u542b\u4e49\u6709\u65b0\u7684\u53d8\u5316\uff0cDA chain \u4e2d\u6211\u4eec\u8ba1\u7b97 ",(0,l.jsx)(a.code,{children:"merkle_hash(tx_root, tx_blob_root)"})," \u4f5c\u4e3a\u65b0\u7684 ",(0,l.jsx)(a.code,{children:"da_tx_root"})]}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-rust",children:"// App chain\n\nlet tx_root = merkle_hash(txs);\n\n// DA chain\n\nlet tx_root = merkle_hash(txs);\nlet tx_blob_root = merkle_hash(txs.map(|tx| merkle_hash(tx.blobs)))\nlet da_tx_root = merkle_hash([tx_root, tx_blob_root]);\n"})}),"\n",(0,l.jsxs)(a.p,{children:["\u6211\u4eec\u6269\u5c55 P2P message protocol \u5728\u4f20\u8f93 Block \u65f6\u989d\u5916\u5e7f\u64ad Block \u5305\u542b\u7684 Blobs \u5217\u8868, DA chain \u7684 Validator \u5fc5\u987b\u7b49\u5230\u63a5\u6536\u5230\u5b8c\u6574 Block \u4ee5\u53ca\u5b8c\u6574\u7684 Blobs \u540e\uff0c\u518d\u53bb\u9a8c\u8bc1 ",(0,l.jsx)(a.code,{children:"da_tx_root"}),"\u3002\u5982\u679c\u6ca1\u95ee\u9898\u518d\u7ee7\u7eed\u9a8c\u8bc1\u5e76\u7b7e\u540d\u3002"]}),"\n",(0,l.jsx)(a.h3,{id:"submit-data",children:"Submit Data"}),"\n",(0,l.jsx)(a.p,{children:"DA chain \u5728 Genesis \u5185\u7f6e\u4e00\u4e2a Dummy Type ID - Data Store\uff0c\u8be5\u5408\u7ea6\u7528\u6765\u6807\u8bb0\u4ea4\u6613\u662f\u5426\u63d0\u4ea4 Blobs\u3002Data Store \u89c4\u5219\u7531\u5171\u8bc6\u9a8c\u8bc1\u3002"}),"\n",(0,l.jsxs)(a.p,{children:["\u4ea4\u6613\u5982\u679c\u63d0\u4ea4\u6570\u636e\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a output Type ID \u5fc5\u987b\u4f7f\u7528 Data Store, \u4e14 output \u7684 data \u5b57\u6bb5\u5fc5\u987b\u4e3a 32 bytes \u7684 ",(0,l.jsx)(a.code,{children:"merkle_hash(blobs)"}),"\u3002Validator \u6536\u96c6\u5230 Block \u4e2d\u63d0\u4ea4\u7684\u5b8c\u6574\u7684 blobs \u540e\u4f1a\u68c0\u67e5\u6bcf\u4e2a\u4ea4\u6613\u7684 ",(0,l.jsx)(a.code,{children:"blob_root"})," \u4ee5\u53ca ",(0,l.jsx)(a.code,{children:"da_tx_root"})," \u662f\u5426\u5408\u6cd5\uff0c\u5982\u679c\u4e0d\u5408\u6cd5\u5219\u62d2\u7edd\u8be5\u5757\u3002"]}),"\n",(0,l.jsxs)(a.p,{children:["\u7528\u6237\u63d0\u4ea4 Blob \u65f6\u4f7f\u7528 ",(0,l.jsx)(a.code,{children:"submit_tx_with_blobs"})," \u63a5\u53e3\uff0c\u9664\u4e86\u63d0\u4f9b UTXO stack tx \u5916\uff0c\u7528\u6237\u9700\u8981\u989d\u5916\u63d0\u4f9b Blobs \u5217\u8868\u3002Validator \u6536\u5230\u4ea4\u6613\u540e\u68c0\u67e5 Blobs \u63d0\u4ea4\u4fe1\u606f\u662f\u5426\u4e0e\u4ea4\u6613\u4e2d\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u81f4\u5219\u5e7f\u64ad\u4ea4\u6613\u4e0e Blobs\u3002"]}),"\n",(0,l.jsx)(a.p,{children:"Blob \u7ed3\u6784\u5982\u4e0b:"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-rust",children:"pub struct Blob {\n    version: u32,\n    data: Bytes,\n}\n\npub struct TxWithBlob {\n    tx: Tx,\n    blobs: Vec<Blob>\n}\n"})}),"\n",(0,l.jsx)(a.h3,{id:"da-proof",children:"DA proof"}),"\n",(0,l.jsxs)(a.p,{children:["\u5728\u63d0\u4ea4\u7684\u4ea4\u6613\u6253\u5305\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 Block header \u4e2d\u7684 ",(0,l.jsx)(a.code,{children:"da_tx_root"})," \u63d0\u4f9b Merkle Proof\u3002\u8bc1\u660e\u67d0\u4e2a blob \u88ab\u63d0\u4ea4\u3002"]}),"\n",(0,l.jsx)(a.p,{children:"\u8bc1\u660e Layer2 App chain \u6570\u636e\u5df2\u7ecf\u88ab\u63d0\u4ea4\u5230 DA chain:"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:["App chain header \u4e2d\u9700\u8981\u4fdd\u5b58\u63d0\u4ea4\u6570\u636e\u7684 blobs merkle root - ",(0,l.jsx)(a.code,{children:"da_blobs_root"})]}),"\n",(0,l.jsxs)(a.li,{children:["\u7b49\u5f85 DA chain \u6253\u5305 Blobs\uff0c\u83b7\u53d6 DA chain \u7684 header \u4ee5\u53ca ",(0,l.jsx)(a.code,{children:"da_blobs_root"})," \u7684 Merkle Proof"]}),"\n",(0,l.jsx)(a.li,{children:"\u5728 RGB++ \u5408\u7ea6\u4e2d\u901a\u8fc7 DA chain \u8f7b\u8282\u70b9\u9a8c\u8bc1 Merkle Proof\uff0c\u5982\u679c\u901a\u8fc7\u9a8c\u8bc1\u5219\u8bc1\u660e App chain Block \u5df2\u7ecf\u88ab\u63d0\u4ea4\u5230 DA layer"}),"\n"]}),"\n",(0,l.jsx)(a.h2,{id:"pruning",children:"Pruning"}),"\n",(0,l.jsx)(a.p,{children:"\u5f00\u542f Pruning \u7684\u8282\u70b9\u4f1a\u5b9a\u671f\u5220\u9664 Block \u4ee5\u53ca Blobs \u6570\u636e\uff0c\u53ea\u4fdd\u7559 Header\u3002\u8282\u70b9\u53ef\u4ee5\u8bbe\u7f6e\u4e3a Archive \u6a21\u5f0f\u4fdd\u5b58\u5b8c\u6574\u6570\u636e\u3002"}),"\n",(0,l.jsx)(a.h2,{id:"data-sampling",children:"Data sampling"}),"\n",(0,l.jsx)(a.p,{children:"DA chain \u8282\u70b9\u4f7f\u7528 Reed-Solomon erasure coding \u5b58\u50a8 Blobs \u6570\u636e\u3002DA \u8282\u70b9\u5c06 Block \u6570\u636e\u4ee5\u53ca Blobs \u5206\u6210\u591a\u4e2a shares, \u5e76\u901a\u8fc7 2D Reed-Solomon Encoded Merkle tree \u5c06 shares \u7f16\u5165 2D \u7684\u77e9\u9635\u7ed3\u6784\u4e2d\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u53ef\u4ee5\u5f97\u5230 dataRoot \u4ee5\u53ca 2D \u77e9\u9635\u4e2d\u6bcf\u4e2a\u884c\u548c\u5217\u7684 Root\u3002"}),"\n",(0,l.jsx)(a.p,{children:(0,l.jsx)(a.img,{alt:"2D Reed-Solomon Encoded Merkle tree",src:n(8068).A+"",width:"1246",height:"648"})}),"\n",(0,l.jsx)(a.p,{children:"\u8f7b\u8282\u70b9\u968f\u673a\u7684\u9009\u62e9\u4e00\u7ec4\u5750\u6807\u5411\u5168\u8282\u70b9\u67e5\u8be2 shares, \u5982\u679c\u5168\u8282\u70b9\u8fd4\u56de\u5408\u6cd5\u7684 shares \u90a3\u4e48\u6211\u4eec\u8ba4\u4e3a\u5927\u6982\u7387\u6570\u636e\u6ca1\u6709\u4e22\u5931\u3002\u8f7b\u8282\u70b9\u6301\u7eed\u8bf7\u6c42\u5168\u8282\u70b9\u5e76\u901a\u8fc7 P2P gossip \u534f\u8bae\u4f20\u64ad shares\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u8f7b\u8282\u70b9\u6570\u91cf\u8db3\u591f\u5927\uff0c\u90a3\u4e48\u8bda\u5b9e\u7684\u5168\u8282\u70b9\u53ef\u4ee5\u4ece P2P \u7f51\u7edc\u4e2d\u83b7\u53d6\u8db3\u591f\u6062\u590d\u5b8c\u6574\u4fe1\u606f\u7684 shares\u3002"}),"\n",(0,l.jsx)(a.p,{children:(0,l.jsx)(a.a,{href:"https://arxiv.org/abs/1809.09044",children:"original paper"})}),"\n",(0,l.jsx)(a.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsx)(a.li,{children:(0,l.jsx)(a.a,{href:"https://arxiv.org/abs/1809.09044",children:"Fraud and Data Availability Proofs: Maximising Light Client Security and Scaling Blockchains with Dishonest Majorities"})}),"\n",(0,l.jsx)(a.li,{children:(0,l.jsx)(a.a,{href:"https://docs.celestia.org/learn/how-celestia-works/data-availability-layer",children:"Celestia's data availability layer"})}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8068:(e,a,n)=>{n.d(a,{A:()=>l});const l=n.p+"assets/images/2D-Reed-Solomon-Encoded-Merkle-tree-1249105bf08c87772f035bb6d7656d61.jpeg"},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>t});var l=n(6540);const s={},r=l.createContext(s);function i(e){const a=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(r.Provider,{value:a},e.children)}}}]);